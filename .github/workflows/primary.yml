#
# This file is part of the PocketSVG package.
#
# Copyright (c) Ponderwell, Ariel Elkin, Fjölnir Ásgeirsson, and Contributors
# For the full copyright and license information, please view the LICENSE
# file that was distributed with this source code.
#

name: CI

on:
  push:
    branches: [master]
  pull_request:

jobs:
  primary:
    name: primary
    runs-on: macOS-11
    steps:
      - uses: actions/checkout@v2

      - name: Select Xcode
        run: sudo xcode-select -s /Applications/Xcode_13.2.app

      - name: Build demos
        run: sh ci/build_demos.sh

      - name: Run unit tests
        run: sh ci/test.sh

  cocoapods:
    name: cocoapods
    runs-on: macOS-11
    steps:
      - uses: actions/checkout@v2
      - name: Lint Podspec
        run: pod lib lint

  spm:
    name: Swift Package Manager
    runs-on: macOS-11
    steps:
      - uses: actions/checkout@v2
      - name: Build package
        run: swift build

  xcframeworks:
    runs-on: macOS-11
    steps:
      - uses: actions/checkout@v2
      - name: Build package
        run: ci/build_xcframework.sh
